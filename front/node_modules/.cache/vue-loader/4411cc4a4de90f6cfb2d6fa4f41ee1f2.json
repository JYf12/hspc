{"remainingRequest":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\src\\views\\usertable\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\src\\views\\usertable\\index.vue","mtime":1714118753477},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681715802937},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1681715802987},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681715802937},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1681715801225}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXJMaXN0LCBwb3N0QWRkQWRtaW5Vc2VyLCBwb3N0RGVsZXRlQWRtaW5Vc2VyLCBwb3N0QWx0ZXJBZG1pblVzZXIsIHBvc3RBbHRlclBhc3N3b3JkIH0gZnJvbSAnQC9hcGkvdXNlcnRhYmxlJwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBmaWx0ZXJzOiB7CiAgICBzdGF0dXNGaWx0ZXIoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHN0YXR1c01hcCA9IHsKICAgICAgICBwdWJsaXNoZWQ6ICdzdWNjZXNzJywKICAgICAgICBkcmFmdDogJ2dyYXknLAogICAgICAgIGRlbGV0ZWQ6ICdkYW5nZXInCiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICdyb2xlJwogICAgXSkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBudWxsLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgYWRtaW5Vc2VyOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIHVzZXJBY2NvdW50OiAnJywKICAgICAgICB1c2VyUGFzc3dvcmQ6ICcnLAogICAgICAgIGNoZWNrUGFzc3dvcmQ6ICcnLAogICAgICAgIGlzQWRtaW46ICcnCiAgICAgICAgLy8gbWFuU2NvcGU6ICcnCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhbHRTY29wZURpYVZpczogZmFsc2UsCiAgICAgIGFsdFBhc0RpYVZpczogZmFsc2UsCiAgICAgIC8vIGFsdFNjb3BlRGF0YTogewogICAgICAvLyAgIGlkOiAwLAogICAgICAvLyAgIG1hblNjb3BlOiAnJwogICAgICAvLyB9LAogICAgICBhbHRQYXNEYXRhOiB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICcnLAogICAgICAgIGNoZWNrTmV3UGFzOiAnJwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBnZXRVc2VyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBvbmNsaWNrQWRkVXNlcigpIHsKICAgICAgcG9zdEFkZEFkbWluVXNlcih0aGlzLmFkbWluVXNlcikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApCiAgICAgIH0pCiAgICB9LAogICAgb25jbGlja0RlbGV0ZVVzZXIoaWQpIHsKICAgICAgcG9zdERlbGV0ZUFkbWluVXNlcihpZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICB9KQogICAgfSwKICAgIG9uY2xpY2tBbHRlclVzZXIoKSB7CiAgICAgIHBvc3RBbHRlckFkbWluVXNlcih0aGlzLmFsdFNjb3BlRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICB9KQogICAgfSwKICAgIG9uY2xpY2tBbHRlclBhc3N3b3JkKGlkKSB7CiAgICAgIHBvc3RBbHRlclBhc3N3b3JkKHRoaXMuYWx0UGFzRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgICB9KQogICAgfSwKICAgIG9wZW5BbHRlclVzZXIoaWQpIHsKICAgICAgdGhpcy5hbHRTY29wZURhdGEuaWQgPSBpZAogICAgICB0aGlzLmFsdFNjb3BlRGlhVmlzID0gdHJ1ZQogICAgfSwKICAgIG9wZW5BbHRlclBhcyhpZCkgewogICAgICB0aGlzLmFsdFBhc0RhdGEuaWQgPSBpZAogICAgICB0aGlzLmFsdFBhc0RpYVZpcyA9IHRydWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/usertable","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form>\n      <el-form-item>\n        <el-dialog\n          title=\"提示\"\n          :visible.sync=\"altPasDiaVis\"\n          width=\"30%\">\n          <el-form ref=\"form\" :model=\"altPasData\" label-width=\"120px\">\n            <el-form-item label=\"新密码:\" :rules=\"[{ required: true, message: '请输入新密码' }]\">\n              <el-input v-model=\"altPasData.newPassword\" type=\"password\" style=\"width: 80%\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"确认新密码:\" :rules=\"[{ pattern: adminUser.userPassword === adminUser.checkPassword, required: true, message: '两次输入密码不一致'}]\">\n              <el-input v-model=\"altPasData.checkNewPas\" type=\"password\" style=\"width: 80%\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button @click=\"altPasDiaVis = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"onclickAlterPassword\">确 定</el-button>\n            </el-form-item>\n          </el-form>\n        </el-dialog>\n<!--        <el-dialog-->\n<!--          title=\"提示\"-->\n<!--          :visible.sync=\"altScopeDiaVis\"-->\n<!--          width=\"30%\">-->\n<!--          <el-form ref=\"form\" :model=\"altScopeData\" label-width=\"80px\">-->\n<!--            <el-form-item label=\"管理范围\" :rules=\"[{ required: true }]\">-->\n<!--              <el-radio v-model=\"altScopeData.manScope\" label=\"0\">个人</el-radio>-->\n<!--              <el-radio v-model=\"altScopeData.manScope\" label=\"1\">全部</el-radio>-->\n<!--            </el-form-item>-->\n<!--            <el-form-item>-->\n<!--              <el-button @click=\"altScopeDiaVis = false\">取 消</el-button>-->\n<!--              <el-button type=\"primary\" @click=\"onclickAlterUser\">确 定</el-button>-->\n<!--            </el-form-item>-->\n<!--          </el-form>-->\n<!--        </el-dialog>-->\n        <el-button v-if=\"role === '[admin]'\" type=\"primary\" @click=\"dialogVisible = true\" plain>新增管理员用户</el-button>\n        <el-dialog\n          title=\"提示\"\n          :visible.sync=\"dialogVisible\"\n          width=\"30%\">\n          <el-form ref=\"form\" :model=\"adminUser\" label-width=\"80px\">\n            <el-form-item label=\"姓名\" :rules=\"[{ required: true, message: '请输入姓名' }]\">\n              <el-input v-model=\"adminUser.username\" style=\"width: 70%\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"账号\" :rules=\"[{ required: true, message: '请输入账号' }]\">\n              <el-input v-model=\"adminUser.userAccount\" style=\"width: 70%\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" :rules=\"[{ required: true, message: '请输入密码' }]\">\n              <el-input v-model=\"adminUser.userPassword\" type=\"password\" style=\"width: 70%\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"确认密码\" :rules=\"[{ pattern: adminUser.userPassword === adminUser.checkPassword, required: true, message: '两次输入密码不一致'}]\">\n              <el-input v-model=\"adminUser.checkPassword\" type=\"password\" style=\"width: 70%\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"权限\" :rules=\"[{ required: true }]\">\n              <el-radio v-model=\"adminUser.isAdmin\" label=\"0\">普通管理员</el-radio>\n              <el-radio v-model=\"adminUser.isAdmin\" label=\"1\">超级管理员</el-radio>\n            </el-form-item>\n<!--            <el-form-item label=\"管理范围\" :rules=\"[{ required: true }]\">-->\n<!--              <el-radio v-model=\"adminUser.manScope\" label=\"0\">个人</el-radio>-->\n<!--              <el-radio v-model=\"adminUser.manScope\" label=\"1\">全部</el-radio>-->\n<!--            </el-form-item>-->\n            <el-form-item>\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"onclickAddUser\">确 定</el-button>\n            </el-form-item>\n          </el-form>\n        </el-dialog>\n      </el-form-item>\n      <el-form-item>\n        <el-table\n          v-loading=\"listLoading\"\n          :data=\"list\"\n          element-loading-text=\"Loading\"\n          border\n          fit\n          highlight-current-row\n        >\n          <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n            <template slot-scope=\"scope\">\n              {{ scope.$index + 1 }}\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" label=\"用户姓名\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.username }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"用户账户\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span>{{ scope.row.userAccount }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"用户类型\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <span v-if=\"scope.row.isSuperadmin == '1'\">超级管理员</span>\n              <span v-if=\"scope.row.isSuperadmin == '0'\">普通管理员</span>\n            </template>\n          </el-table-column>\n<!--          <el-table-column label=\"管理权限\" align=\"center\">-->\n<!--            <template slot-scope=\"scope\">-->\n<!--              <span v-if=\"scope.row.manScope == '1'\">全部</span>-->\n<!--              <span v-if=\"scope.row.manScope == '0'\">个人</span>-->\n<!--            </template>-->\n<!--          </el-table-column>-->\n          <el-table-column label=\"用户管理\" align=\"center\" v-if=\"role === '[admin]'\">\n            <template slot-scope=\"scope\">\n              <el-button @click.native.prevent=\"openAlterPas(scope.row.id)\" type=\"text\" size=\"small\">修改密码</el-button>\n<!--              <el-button @click.native.prevent=\"openAlterUser(scope.row.id)\" type=\"text\" size=\"small\">更改权限</el-button>-->\n              <el-button @click.native.prevent=\"onclickDeleteUser(scope.row.id)\" type=\"text\" size=\"small\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { getUserList, postAddAdminUser, postDeleteAdminUser, postAlterAdminUser, postAlterPassword } from '@/api/usertable'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'role'\n    ])\n  },\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      adminUser: {\n        username: '',\n        userAccount: '',\n        userPassword: '',\n        checkPassword: '',\n        isAdmin: ''\n        // manScope: ''\n      },\n      dialogVisible: false,\n      altScopeDiaVis: false,\n      altPasDiaVis: false,\n      // altScopeData: {\n      //   id: 0,\n      //   manScope: ''\n      // },\n      altPasData: {\n        id: 0,\n        newPassword: '',\n        checkNewPas: ''\n      }\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      getUserList().then(response => {\n        this.list = response.data\n        this.listLoading = false\n      })\n    },\n    onclickAddUser() {\n      postAddAdminUser(this.adminUser).then(res => {\n        this.dialogVisible = false\n        this.$router.go(0)\n      })\n    },\n    onclickDeleteUser(id) {\n      postDeleteAdminUser(id).then(res => {\n        this.$router.go(0)\n      })\n    },\n    onclickAlterUser() {\n      postAlterAdminUser(this.altScopeData).then(res => {\n        this.$router.go(0)\n      })\n    },\n    onclickAlterPassword(id) {\n      postAlterPassword(this.altPasData).then(res => {\n        this.$router.go(0)\n      })\n    },\n    openAlterUser(id) {\n      this.altScopeData.id = id\n      this.altScopeDiaVis = true\n    },\n    openAlterPas(id) {\n      this.altPasData.id = id\n      this.altPasDiaVis = true\n    }\n  }\n}\n</script>\n"]}]}