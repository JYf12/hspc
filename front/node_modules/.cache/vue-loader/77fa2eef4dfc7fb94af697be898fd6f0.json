{"remainingRequest":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\src\\views\\project_details\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\src\\views\\project_details\\index.vue","mtime":1683168528927},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681715802937},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1681715802987},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681715802937},{"path":"D:\\其他\\刘老师\\项目\\华胜投标招标\\bidding-agent-be\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1681715801225}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFByb2plY3RJbmZvLCBnZXRPcmRlckxpc3QsIHBvc3RTdG9wUHJvamVjdCwgZGVsZXRlUHJvamVjdCB9IGZyb20gJ0AvYXBpL3Byb2plY3RfZGV0YWlscycKaW1wb3J0IHsgYWRkUHJvamVjdEZpbGUsIHVwZGF0ZVByb2plY3QgfSBmcm9tICdAL2FwaS90YWJsZScKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlEYXRhOiB7CiAgICAgICAgcHJvamVjdElkOiAnJwogICAgICB9LAogICAgICBwcm9qZWN0SW5mbzogbnVsbCwKICAgICAgb3JkZXJRdWVyeURhdGE6IHsKICAgICAgICBwcm9qZWN0SWQ6ICcnLAogICAgICAgIHVzZXJuYW1lOiAnJwogICAgICB9LAogICAgICBvcmRlckxpc3Q6IG51bGwsCiAgICAgIHBhZ2U6IDEsCiAgICAgIGxpbWl0OiA1LAogICAgICB0b3RhbDogMCwKICAgICAgcmVhZFN0YXR1czogJ3JlYWRvbmx5JywKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICB1cGRhdGVEYXRhOiB7CiAgICAgICAgcHJvamVjdE5hbWU6ICcnLAogICAgICAgIGFkZGl0aW9uOiAnJywKICAgICAgICBwYWNrYWdlTGlzdDogW10sCiAgICAgICAgc3RhdHVzOiBbXSwgLy8gMCDmlrDlop7vvIwgMSDmm7TmlrDvvIwgMiDkuI3lj5gKICAgICAgICBwcm9qZWN0SWQ6ICcnCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXJ5RGF0YS5wcm9qZWN0SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucHJvamVjdElkCiAgICB0aGlzLm9yZGVyUXVlcnlEYXRhLnByb2plY3RJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wcm9qZWN0SWQKICAgIHRoaXMuZ2V0UHJvamVjdERldGFpbHMoKQogICAgdGhpcy5nZXRPcmRlckxpc3RQYWdlKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFByb2plY3REZXRhaWxzKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBhd2FpdCBnZXRQcm9qZWN0SW5mbyh0aGlzLnF1ZXJ5RGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5wcm9qZWN0SW5mbyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB0aGlzLnVwZGF0ZURhdGEucGFja2FnZUxpc3QgPSByZXNwb25zZS5kYXRhLnBhY2thZ2VMaXN0CiAgICAgICAgY29uc3QgaW5kZXhOdW0gPSB0aGlzLnVwZGF0ZURhdGEucGFja2FnZUxpc3QubGVuZ3RoCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleE51bTsgaSsrKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEuc3RhdHVzLnB1c2goMikKICAgICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh7fSkKICAgICAgICB9CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZ2V0T3JkZXJMaXN0UGFnZSgpIHsKICAgICAgZ2V0T3JkZXJMaXN0KHRoaXMucGFnZSwgdGhpcy5saW1pdCwgdGhpcy5vcmRlclF1ZXJ5RGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5vcmRlckxpc3QgPSByZXNwb25zZS5kYXRhLnJlY29yZHMKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbAogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGltaXQgPSB2YWwKICAgICAgdGhpcy5nZXRPcmRlckxpc3RQYWdlKCkKICAgICAgY29uc29sZS5sb2coYOavj+mhtSAke3ZhbH0g5p2hYCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXRPcmRlckxpc3RQYWdlKCkKICAgICAgY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCkKICAgIH0sCiAgICBoYW5kbGVVcGRhdGFGb3JtKCkgewogICAgICB0aGlzLnJlYWRTdGF0dXMgPSAnJwogICAgfSwKICAgIGFzeW5jIGhhbmRsZVN1Ym1pdFVwZGF0YSgpIHsKICAgICAgdGhpcy5yZWFkU3RhdHVzID0gJ3JlYWRvbmx5JwogICAgICB0aGlzLnVwZGF0ZURhdGEucHJvamVjdElkID0gdGhpcy5wcm9qZWN0SW5mby5pZAogICAgICB0aGlzLnVwZGF0ZURhdGEucHJvamVjdE5hbWUgPSB0aGlzLnByb2plY3RJbmZvLnByb2plY3ROYW1lCiAgICAgIHRoaXMudXBkYXRlRGF0YS5hZGRpdGlvbiA9IHRoaXMucHJvamVjdEluZm8uYWRkaXRpb24KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGF0YS5zdGF0dXNbaV0gPT09IDIpIHsKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfQogICAgICAgIHZhciBmaWxlZGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgZmlsZWRhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy5maWxlTGlzdFtpXS5yYXcpCiAgICAgICAgYXdhaXQgYWRkUHJvamVjdEZpbGUoZmlsZWRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEucGFja2FnZUxpc3RbaV0uZmlsZVBhdGggPSByZXNwb25zZS5kYXRhLmZpbGVQYXRoCiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YS5wYWNrYWdlTGlzdFtpXS5maWxlTmFtZSA9IHJlc3BvbnNlLmRhdGEuZmlsZU5hbWUKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGkgPSBpIC0gMQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgICAgdXBkYXRlUHJvamVjdCh0aGlzLnVwZGF0ZURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pu05paw5oiQ5Yqf77yBJykKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCkKICAgICAgfSkKICAgIH0sCiAgICBjYW5jZWxNb2RpZmljYXRpb24oKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgfSwKICAgIG9uY2xpY2tTdG9wUHJvamVjdCgpIHsKICAgICAgcG9zdFN0b3BQcm9qZWN0KHRoaXMucHJvamVjdEluZm8uaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIH0pCiAgICB9LAogICAgb25jbGlja0RlbGV0ZVByb2plY3QoKSB7CiAgICAgIGRlbGV0ZVByb2plY3QodGhpcy5wcm9qZWN0SW5mby5pZCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdGFibGUnKQogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgfSkKICAgIH0sCiAgICBvbmNsaWNrT3JkZXJEZXRhaWxzKGUpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdvcmRlcl9kZXRhaWxzJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiBlLmlkCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFkZExpc3QoKSB7CiAgICAgIHRoaXMudXBkYXRlRGF0YS5wYWNrYWdlTGlzdC5wdXNoKHsKICAgICAgICBpZDogMCwKICAgICAgICBmaWxlTmFtZTogJycsCiAgICAgICAgZmlsZVBhdGg6ICcnLAogICAgICAgIHBhY2thZ2VOYW1lOiAnJywKICAgICAgICBwcmljZTogJycsCiAgICAgICAgcHJvamVjdElkOiB0aGlzLnByb2plY3RJbmZvLmlkLAogICAgICAgIHN0YXJ0VGltZTogJycsCiAgICAgICAgZW5kVGltZTogJycKICAgICAgfSkKICAgICAgdGhpcy51cGRhdGVEYXRhLnN0YXR1cy5wdXNoKDIpCiAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh7fSkKICAgIH0sCiAgICAvLyDmlrDlop7kuIDooYwKICAgIGFkZFBhcmFtc1NldHRpbmcoKSB7CiAgICAgIHRoaXMuYWRkTGlzdCgpCiAgICB9LAoKICAgIC8vIOWIoOmZpOW9k+WJjeihjAogICAgZGVsZXRlUm93KGluZGV4KSB7CiAgICAgIHRoaXMudXBkYXRlRGF0YS5wYWNrYWdlTGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIHRoaXMudXBkYXRlRGF0YS5zdGF0dXMuc3BsaWNlKGluZGV4LCAxKQogICAgICB0aGlzLmZpbGVMaXN0LnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZWxpc3QsIGluZGV4KSB7CiAgICAgIGlmIChmaWxlKSB7CiAgICAgICAgdGhpcy5maWxlTGlzdFtpbmRleF0gPSBmaWxlbGlzdFtmaWxlbGlzdC5sZW5ndGggLSAxXQogICAgICAgIGlmICh0aGlzLnVwZGF0ZURhdGEucGFja2FnZUxpc3RbaW5kZXhdLmZpbGVQYXRoID09PSAnJykgewogICAgICAgICAgdGhpcy51cGRhdGVEYXRhLnN0YXR1c1tpbmRleF0gPSAwCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXBkYXRlRGF0YS5zdGF0dXNbaW5kZXhdID0gMQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZWxpc3QsIGluZGV4KSB7CiAgICAgIHRoaXMuZmlsZUxpc3RbaW5kZXhdID0ge30KICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/project_details","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"form\" :model=\"projectInfo\" label-width=\"120px\">\n      <el-form-item>\n        <el-button @click=\"handleUpdataForm\" v-if=\"readStatus==='readonly'\" type=\"primary\">修改</el-button>\n        <el-button @click=\"handleSubmitUpdata\" v-if=\"readStatus===''\" type=\"primary\">确定</el-button>\n        <el-button @click=\"cancelModification\" v-if=\"readStatus===''\" type=\"primary\">取消</el-button>\n        <el-button @click=\"onclickStopProject\" type=\"warning\">停止招标</el-button>\n        <el-button @click=\"onclickDeleteProject\" type=\"danger\">删除</el-button>\n      </el-form-item>\n      <el-form-item label=\"项目编号\">\n        <el-input :readonly=\"true\" v-model=\"projectInfo.projectId\"/>\n      </el-form-item>\n      <el-form-item label=\"项目名称\">\n        <el-input :readonly=\"readStatus==='readonly'\" v-model=\"projectInfo.projectName\"/>\n      </el-form-item>\n      <el-form-item label=\"备注\">\n        <el-input :readonly=\"readStatus==='readonly'\" v-model=\"projectInfo.addition\" type=\"textarea\"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button v-if=\"readStatus===''\" type=\"primary\" size=\"small\" @click=\"addParamsSetting\">新增包件</el-button>\n      </el-form-item>\n      <el-form-item label=\"包件信息\">\n        <el-table\n          :data=\"updateData.packageList\"\n          style=\"width: 100%\"\n          class=\"list-table\"\n          size=\"mini\"\n          border>\n          <el-table-column prop=\"index\" label=\"序号\" width=\"50\">\n            <template slot-scope=\"scope\">\n              <el-form-item>\n                {{ scope.$index + 1 }}\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"packageName\" label=\"包件名称\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-form-item\n                label=\"\"\n                :prop=\"'form.tableData.' + scope.$index + '.packageName'\"\n                :rules=\"[{ required: true, message: '包件名称不可为空', trigger: 'change' }]\">\n                <el-input :readonly=\"readStatus==='readonly'\" v-model=\"scope.row.packageName\" placeholder=\"请输入包件名称\"></el-input>\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"price\" label=\"招标文件费\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-form-item\n                label=\"\"\n                :prop=\"'form.tableData.' + scope.$index + '.price'\"\n                :rules=\"[{ required: true, message: '招标文件费不可为空', trigger: 'change' }]\"\n              >\n                <el-input :readonly=\"readStatus==='readonly'\" v-model=\"scope.row.price\" placeholder=\"请输入招标文件费\" @keyup=\"value=value.replace(/[^\\d]/g,'')\" @blur=\"value=value.replace(/[^\\d]/g,'')\">\n                  <template slot=\"append\">元</template>\n                </el-input>\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"startTime\" label=\"开始时间\">\n            <template slot-scope=\"scope\">\n              <el-form-item\n                label=\"\"\n                :prop=\"'form.tableData.' + scope.$index + '.startTime'\"\n                :rules=\"[{ required: true, message: '开始时间不可为空', trigger: 'change' }]\">\n                <el-date-picker\n                  :readonly=\"readStatus==='readonly'\"\n                  v-model=\"scope.row.startTime\"\n                  type=\"datetime\"\n                  placeholder=\"选择开始时间\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\">\n                </el-date-picker>\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"endTime\" label=\"结束时间\">\n            <template slot-scope=\"scope\">\n              <el-form-item\n                label=\"\"\n                :prop=\"'form.tableData.' + scope.$index + '.endTime'\"\n                :rules=\"[{ required: true, message: '结束时间不可为空', trigger: 'change' }]\">\n                <el-date-picker\n                  :readonly=\"readStatus==='readonly'\"\n                  v-model=\"scope.row.endTime\"\n                  type=\"datetime\"\n                  placeholder=\"选择结束时间\"\n                  value-format=\"yyyy-MM-dd HH:mm:ss\">\n                </el-date-picker>\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"filePath\" label=\"招标文件\" width=\"200\">\n            <template slot-scope=\"scope\">\n              <el-form-item\n                label=\"\"\n                :prop=\"'form.tableData.' + scope.$index + '.fileList'\"\n                :rules=\"[{ required: true, message: '招标文件不可为空', trigger: 'change' }]\"\n              >\n                <el-upload\n                  v-if=\"readStatus===''\"\n                  action=\"http://localhost:8089\"\n                  class=\"upload-demo\"\n                  ref=\"upload\"\n                  :on-change=\"(file, filelist) => {handleChange(file, filelist, scope.$index)}\"\n                  :on-preview=\"handlePreview\"\n                  :on-remove=\"(file, filelist) => {handleRemove(file, filelist, scope.$index)}\"\n                  :limit=\"1\"\n                  :auto-upload=\"false\">\n                  选取文件\n                </el-upload>\n                <p v-if=\"readStatus==='readonly'\">{{ scope.row.fileName }}</p>\n              </el-form-item>\n            </template>\n          </el-table-column>\n          <el-table-column v-if=\"readStatus===''\" label=\"操作\" width=\"50\">\n            <template slot-scope=\"scope\">\n              <el-button @click.native.prevent=\"deleteRow(scope.$index)\" type=\"text\" size=\"small\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n      <el-form-item label=\"投标信息\">\n        <el-table\n          :data=\"orderList\"\n          style=\"width: 100%\"\n          :row-class-name=\"tableRowClassName\">\n          <el-table-column\n            prop=\"index\"\n            label=\"序号\"\n            width=\"180\">\n            <template slot-scope=\"scope\">\n              {{ scope.$index + 1 }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"orderPeopleName\"\n            label=\"投标联系人姓名\"\n            width=\"180\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.name }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"unitName\"\n            label=\"投标单位\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.unitName }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"total\"\n            label=\"总金额（元）\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.total }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"status\"\n            label=\"订单状态\"\n            width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-tag\n                v-if=\"scope.row.status === 0\"\n                :key=\"'待付款'\"\n                :type=\"'danger'\"\n                effect=\"dark\">\n                待付款\n              </el-tag>\n              <el-tag\n                v-if=\"scope.row.status === 1\"\n                :key=\"'已付款'\"\n                :type=\"'warning'\"\n                effect=\"dark\">\n                已付款\n              </el-tag>\n              <el-tag\n                v-if=\"scope.row.status === 2\"\n                :key=\"'已完成'\"\n                :type=\"'success'\"\n                effect=\"dark\">\n                已完成\n              </el-tag>\n              <el-tag\n                v-if=\"scope.row.status === 3\"\n                :key=\"'已失效'\"\n                :type=\"'info'\"\n                effect=\"dark\">\n                已失效\n              </el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button @click=\"onclickOrderDetails(scope.row)\" type=\"text\" size=\"small\">查看详情</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <div class=\"block\">\n          <el-pagination\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"page\"\n            :page-sizes=\"[5, 10, 20, 50]\"\n            :page-size=\"limit\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"total\"\n            style=\"padding: 30px 0; text-align: center;\">\n          </el-pagination>\n        </div>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { getProjectInfo, getOrderList, postStopProject, deleteProject } from '@/api/project_details'\nimport { addProjectFile, updateProject } from '@/api/table'\n\nexport default {\n  data() {\n    return {\n      queryData: {\n        projectId: ''\n      },\n      projectInfo: null,\n      orderQueryData: {\n        projectId: '',\n        username: ''\n      },\n      orderList: null,\n      page: 1,\n      limit: 5,\n      total: 0,\n      readStatus: 'readonly',\n      fileList: [],\n      updateData: {\n        projectName: '',\n        addition: '',\n        packageList: [],\n        status: [], // 0 新增， 1 更新， 2 不变\n        projectId: ''\n      }\n    }\n  },\n  created() {\n    this.queryData.projectId = this.$route.params.projectId\n    this.orderQueryData.projectId = this.$route.params.projectId\n    this.getProjectDetails()\n    this.getOrderListPage()\n  },\n  methods: {\n    async getProjectDetails() {\n      this.listLoading = true\n      await getProjectInfo(this.queryData).then(response => {\n        this.projectInfo = response.data\n        this.updateData.packageList = response.data.packageList\n        const indexNum = this.updateData.packageList.length\n        for (let i = 0; i < indexNum; i++) {\n          this.updateData.status.push(2)\n          this.fileList.push({})\n        }\n        this.listLoading = false\n      })\n    },\n    getOrderListPage() {\n      getOrderList(this.page, this.limit, this.orderQueryData).then(response => {\n        this.orderList = response.data.records\n        this.total = response.data.total\n      })\n    },\n    handleSizeChange(val) {\n      this.limit = val\n      this.getOrderListPage()\n      console.log(`每页 ${val} 条`)\n    },\n    handleCurrentChange(val) {\n      this.page = val\n      this.getOrderListPage()\n      console.log(`当前页: ${val}`)\n    },\n    handleUpdataForm() {\n      this.readStatus = ''\n    },\n    async handleSubmitUpdata() {\n      this.readStatus = 'readonly'\n      this.updateData.projectId = this.projectInfo.id\n      this.updateData.projectName = this.projectInfo.projectName\n      this.updateData.addition = this.projectInfo.addition\n      for (var i = 0; i < this.fileList.length; i++) {\n        if (this.updateData.status[i] === 2) {\n          continue\n        }\n        var filedata = new FormData()\n        filedata.append('file', this.fileList[i].raw)\n        await addProjectFile(filedata).then(response => {\n          if (response.message === 'success') {\n            this.updateData.packageList[i].filePath = response.data.filePath\n            this.updateData.packageList[i].fileName = response.data.fileName\n          } else {\n            i = i - 1\n          }\n        })\n      }\n      updateProject(this.updateData).then(response => {\n        this.$message.success('更新成功！')\n        this.$router.go(0)\n      })\n    },\n    cancelModification() {\n      this.$router.go(0)\n    },\n    onclickStopProject() {\n      postStopProject(this.projectInfo.id).then(res => {\n        console.log(res)\n      })\n    },\n    onclickDeleteProject() {\n      deleteProject(this.projectInfo.id).then(res => {\n        this.$router.push('/table')\n        console.log(res)\n      })\n    },\n    onclickOrderDetails(e) {\n      this.$router.push({\n        name: 'order_details',\n        params: {\n          id: e.id\n        }\n      })\n    },\n    addList() {\n      this.updateData.packageList.push({\n        id: 0,\n        fileName: '',\n        filePath: '',\n        packageName: '',\n        price: '',\n        projectId: this.projectInfo.id,\n        startTime: '',\n        endTime: ''\n      })\n      this.updateData.status.push(2)\n      this.fileList.push({})\n    },\n    // 新增一行\n    addParamsSetting() {\n      this.addList()\n    },\n\n    // 删除当前行\n    deleteRow(index) {\n      this.updateData.packageList.splice(index, 1)\n      this.updateData.status.splice(index, 1)\n      this.fileList.splice(index, 1)\n    },\n    handleChange(file, filelist, index) {\n      if (file) {\n        this.fileList[index] = filelist[filelist.length - 1]\n        if (this.updateData.packageList[index].filePath === '') {\n          this.updateData.status[index] = 0\n        } else {\n          this.updateData.status[index] = 1\n        }\n      }\n    },\n\n    handleRemove(file, filelist, index) {\n      this.fileList[index] = {}\n    },\n    handlePreview(file) {\n      console.log(file)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}