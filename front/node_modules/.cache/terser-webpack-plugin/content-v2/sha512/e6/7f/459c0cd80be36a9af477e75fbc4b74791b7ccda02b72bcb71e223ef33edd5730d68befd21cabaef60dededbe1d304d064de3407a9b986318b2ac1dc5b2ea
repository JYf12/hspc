{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-85e4e298\"],{\"371d\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"项目名称\"}},[a(\"el-input\",{model:{value:e.form.projectName,callback:function(t){e.$set(e.form,\"projectName\",t)},expression:\"form.projectName\"}})],1),a(\"el-form-item\",{attrs:{label:\"备注\"}},[a(\"el-input\",{attrs:{type:\"textarea\"},model:{value:e.form.addition,callback:function(t){e.$set(e.form,\"addition\",t)},expression:\"form.addition\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:e.addParamsSetting}},[e._v(\"新增包件\")])],1),a(\"el-form-item\",{attrs:{label:\"包件信息\"}},[a(\"el-table\",{staticClass:\"list-table\",staticStyle:{width:\"100%\"},attrs:{data:e.form.tableData,size:\"mini\",border:\"\"}},[a(\"el-table-column\",{attrs:{prop:\"index\",label:\"序号\",width:\"110\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",[e._v(\" \"+e._s(t.$index+1)+\" \")])]}}])}),a(\"el-table-column\",{attrs:{prop:\"packageName\",label:\"包件名称\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",{attrs:{label:\"\",prop:\"form.tableData.\"+t.$index+\".packageName\",rules:[{required:!0,message:\"包件名称不可为空\",trigger:\"change\"}]}},[a(\"el-input\",{attrs:{placeholder:\"请输入包件名称\"},model:{value:t.row.packageName,callback:function(a){e.$set(t.row,\"packageName\",a)},expression:\"scope.row.packageName\"}})],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"price\",label:\"招标文件费\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",{attrs:{label:\"\",prop:\"form.tableData.\"+t.$index+\".price\",rules:[{required:!0,message:\"招标文件费不可为空\",trigger:\"change\"},{type:\"number\",message:\"招标文件费必须为数字值\"}]}},[a(\"el-input\",{attrs:{placeholder:\"请输入招标文件费\"},on:{keyup:function(t){e.value=e.value.replace(/[^\\d]/g,\"\")},blur:function(t){e.value=e.value.replace(/[^\\d]/g,\"\")}},model:{value:t.row.price,callback:function(a){e.$set(t.row,\"price\",a)},expression:\"scope.row.price\"}},[a(\"template\",{slot:\"append\"},[e._v(\"元\")])],2)],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"startTime\",label:\"开始时间\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",{attrs:{label:\"\",prop:\"form.tableData.\"+t.$index+\".startTime\",rules:[{required:!0,message:\"开始时间不可为空\",trigger:\"change\"}]}},[a(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"选择开始时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.row.startTime,callback:function(a){e.$set(t.row,\"startTime\",a)},expression:\"scope.row.startTime\"}})],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"endTime\",label:\"结束时间\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",{attrs:{label:\"\",prop:\"form.tableData.\"+t.$index+\".endTime\",rules:[{required:!0,message:\"结束时间不可为空\",trigger:\"change\"}]}},[a(\"el-date-picker\",{attrs:{type:\"datetime\",placeholder:\"选择结束时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:t.row.endTime,callback:function(a){e.$set(t.row,\"endTime\",a)},expression:\"scope.row.endTime\"}})],1)]}}])}),a(\"el-table-column\",{attrs:{prop:\"filePath\",label:\"招标文件\",width:\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form-item\",{attrs:{label:\"\",prop:\"form.tableData.\"+t.$index+\".fileList\",rules:[{required:!0,message:\"招标文件不可为空\",trigger:\"change\"}]}},[a(\"el-upload\",{ref:\"upload\",staticClass:\"upload-demo\",attrs:{action:\"http://localhost:8089\",\"on-change\":function(a,r){e.handleChange(a,r,t.$index)},\"on-preview\":e.handlePreview,\"on-remove\":function(a,r){e.handleRemove(a,r,t.$index)},limit:2,\"auto-upload\":!1}},[e._v(\" 选取文件 \")])],1)]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"50\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",size:\"small\"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index)}}},[e._v(\"删除\")])]}}])})],1)],1),a(\"el-form-item\",{attrs:{align:\"center\"}},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.onSubmit}},[e._v(\"创建\")]),a(\"el-button\",{on:{click:e.onCancel}},[e._v(\"取消\")])],1)],1)],1)},n=[],l=a(\"c7eb\"),i=a(\"1da1\"),o=(a(\"a434\"),a(\"a9e3\"),a(\"99af\"),a(\"b0c0\"),a(\"ad8f\")),s={data:function(){return{form:{projectName:\"\",addition:\"\",tableData:[{packageName:\"\",price:\"\",filePath:\"\",fileName:\"\",startTime:\"\",endTime:\"\"}]},fileList:[{}]}},methods:{onSubmit:function(){var e=this;return Object(i[\"a\"])(Object(l[\"a\"])().mark((function t(){var a,r;return Object(l[\"a\"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.fileList.length)){t.next=9;break}return r=new FormData,r.append(\"file\",e.fileList[a].raw),t.next=6,Object(o[\"b\"])(r).then((function(t){\"success\"===t.message?(e.form.tableData[a].filePath=t.data.filePath,e.form.tableData[a].fileName=t.data.fileName):a-=1}));case 6:a++,t.next=1;break;case 9:Object(o[\"a\"])(e.form).then((function(t){e.$message.success(\"创建成功！\"),e.$router.push(\"/table\")}));case 10:case\"end\":return t.stop()}}),t)})))()},onCancel:function(){this.$message({message:\"cancel!\",type:\"warning\"})},addList:function(){this.form.tableData.push({packageName:\"\",price:\"\",filePath:\"\"}),this.fileList.push({})},addParamsSetting:function(){this.addList()},deleteRow:function(e){this.form.tableData.splice(e,1),this.fileList.splice(e,1)},handleChange:function(e,t,a){var r=Number(e.size/1024/1024);if(r>2048)return this.$message.warning(\"文件大小不能超过2GB，请重新上传。\"),void t.splice(t.length-1,1);while(t.length>1)t.splice(0,1);e&&(this.fileList[a]=t[t.length-1])},handleRemove:function(e,t,a){this.fileList[a]={}},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning(\"当前限制选择 1 个文件，本次选择了 \".concat(e.length,\" 个文件，共选择了 \").concat(e.length+t.length,\" 个文件\"))},beforeRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))}}},c=s,u=(a(\"5d1d\"),a(\"2877\")),d=Object(u[\"a\"])(c,r,n,!1,null,\"4cbf3f05\",null);t[\"default\"]=d.exports},\"5d1d\":function(e,t,a){\"use strict\";a(\"8a53\")},\"8a53\":function(e,t,a){},a434:function(e,t,a){\"use strict\";var r=a(\"23e7\"),n=a(\"23cb\"),l=a(\"a691\"),i=a(\"50c4\"),o=a(\"7b0b\"),s=a(\"65f0\"),c=a(\"8418\"),u=a(\"1dde\"),d=a(\"ae40\"),f=u(\"splice\"),m=d(\"splice\",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,g=\"Maximum allowed length exceeded\";r({target:\"Array\",proto:!0,forced:!f||!m},{splice:function(e,t){var a,r,u,d,f,m,w=o(this),v=i(w.length),k=n(e,v),y=arguments.length;if(0===y?a=r=0:1===y?(a=0,r=v-k):(a=y-2,r=h(p(l(t),0),v-k)),v+a-r>b)throw TypeError(g);for(u=s(w,r),d=0;d<r;d++)f=k+d,f in w&&c(u,d,w[f]);if(u.length=r,a<r){for(d=k;d<v-r;d++)f=d+r,m=d+a,f in w?w[m]=w[f]:delete w[m];for(d=v;d>v-r+a;d--)delete w[d-1]}else if(a>r)for(d=v-r;d>k;d--)f=d+r-1,m=d+a-1,f in w?w[m]=w[f]:delete w[m];for(d=0;d<a;d++)w[d+k]=arguments[d+2];return w.length=v-r+a,u}})},ad8f:function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return l})),a.d(t,\"a\",(function(){return i})),a.d(t,\"d\",(function(){return o})),a.d(t,\"b\",(function(){return s}));var r=a(\"b775\"),n=\"/api/project\";function l(e,t,a){return Object(r[\"a\"])({url:n+\"/projectListByLimit/\"+e+\"/\"+t,method:\"post\",data:a})}function i(e){return Object(r[\"a\"])({url:n+\"/addProject\",method:\"post\",data:e})}function o(e){return Object(r[\"a\"])({url:n+\"/updateProject\",method:\"post\",data:e})}function s(e){return Object(r[\"a\"])({url:n+\"/addProjectFile\",method:\"post\",headers:{\"Content-Type\":\"multipart/form-data;charset=utf-8\"},data:e})}}}]);","extractedComments":[]}