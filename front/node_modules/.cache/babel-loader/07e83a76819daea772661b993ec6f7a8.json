{"remainingRequest":"F:\\temp\\front\\node_modules\\babel-loader\\lib\\index.js!F:\\temp\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\temp\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\temp\\front\\src\\views\\usertable\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\temp\\front\\src\\views\\usertable\\index.vue","mtime":1724232655994},{"path":"F:\\temp\\front\\babel.config.js","mtime":1717475445387},{"path":"F:\\temp\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1717475447212},{"path":"F:\\temp\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1717475446713},{"path":"F:\\temp\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1717475447212},{"path":"F:\\temp\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1717475453180}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovdGVtcC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBnZXRVc2VyTGlzdCwgcG9zdEFkZEFkbWluVXNlciwgcG9zdERlbGV0ZUFkbWluVXNlciwgcG9zdEFsdGVyQWRtaW5Vc2VyLCBwb3N0QWx0ZXJQYXNzd29yZCB9IGZyb20gJ0AvYXBpL3VzZXJ0YWJsZSc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICB2YXIgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnZ3JheScsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydyb2xlJ10pKSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgIGFkbWluVXNlcjogewogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICB1c2VyQWNjb3VudDogJycsCiAgICAgICAgdXNlclBhc3N3b3JkOiAnJywKICAgICAgICBjaGVja1Bhc3N3b3JkOiAnJywKICAgICAgICBpc0FkbWluOiAnJwogICAgICAgIC8vIG1hblNjb3BlOiAnJwogICAgICB9LAoKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGFsdFNjb3BlRGlhVmlzOiBmYWxzZSwKICAgICAgYWx0UGFzRGlhVmlzOiBmYWxzZSwKICAgICAgLy8gYWx0U2NvcGVEYXRhOiB7CiAgICAgIC8vICAgaWQ6IDAsCiAgICAgIC8vICAgbWFuU2NvcGU6ICcnCiAgICAgIC8vIH0sCiAgICAgIGFsdFBhc0RhdGE6IHsKICAgICAgICBpZDogMCwKICAgICAgICBuZXdQYXNzd29yZDogJycsCiAgICAgICAgY2hlY2tOZXdQYXM6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0VXNlckxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIG9uY2xpY2tBZGRVc2VyOiBmdW5jdGlvbiBvbmNsaWNrQWRkVXNlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHBvc3RBZGRBZG1pblVzZXIodGhpcy5hZG1pblVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgX3RoaXMyLiRyb3V0ZXIuZ28oMCk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uY2xpY2tEZWxldGVVc2VyOiBmdW5jdGlvbiBvbmNsaWNrRGVsZXRlVXNlcihpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcG9zdERlbGV0ZUFkbWluVXNlcihpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2Uoe3BhdGg6dGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLHF1ZXJ5OiB0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLnF1ZXJ5IH0pCiAgICAgIH0pOwogICAgfSwKICAgIG9uY2xpY2tBbHRlclVzZXI6IGZ1bmN0aW9uIG9uY2xpY2tBbHRlclVzZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBwb3N0QWx0ZXJBZG1pblVzZXIodGhpcy5hbHRTY29wZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNC4kcm91dGVyLmdvKDApOwogICAgICB9KTsKICAgIH0sCiAgICBvbmNsaWNrQWx0ZXJQYXNzd29yZDogZnVuY3Rpb24gb25jbGlja0FsdGVyUGFzc3dvcmQoaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHBvc3RBbHRlclBhc3N3b3JkKHRoaXMuYWx0UGFzRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM1LiRyb3V0ZXIuZ28oMCk7CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5BbHRlclVzZXI6IGZ1bmN0aW9uIG9wZW5BbHRlclVzZXIoaWQpIHsKICAgICAgdGhpcy5hbHRTY29wZURhdGEuaWQgPSBpZDsKICAgICAgdGhpcy5hbHRTY29wZURpYVZpcyA9IHRydWU7CiAgICB9LAogICAgb3BlbkFsdGVyUGFzOiBmdW5jdGlvbiBvcGVuQWx0ZXJQYXMoaWQpIHsKICAgICAgdGhpcy5hbHRQYXNEYXRhLmlkID0gaWQ7CiAgICAgIHRoaXMuYWx0UGFzRGlhVmlzID0gdHJ1ZTsKICAgIH0KICB9Cn07"},{"version":3,"names":["getUserList","postAddAdminUser","postDeleteAdminUser","postAlterAdminUser","postAlterPassword","mapGetters","filters","statusFilter","status","statusMap","published","draft","deleted","computed","_objectSpread","data","list","listLoading","adminUser","username","userAccount","userPassword","checkPassword","isAdmin","dialogVisible","altScopeDiaVis","altPasDiaVis","altPasData","id","newPassword","checkNewPas","created","fetchData","methods","_this","then","response","onclickAddUser","_this2","res","$router","go","onclickDeleteUser","_this3","onclickAlterUser","_this4","altScopeData","onclickAlterPassword","_this5","openAlterUser","openAlterPas"],"sources":["src/views/usertable/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form>\r\n      <el-form-item>\r\n        <el-dialog\r\n          title=\"提示\"\r\n          :visible.sync=\"altPasDiaVis\"\r\n          width=\"30%\">\r\n          <el-form ref=\"form\" :model=\"altPasData\" label-width=\"120px\">\r\n            <el-form-item label=\"新密码:\" :rules=\"[{ required: true, message: '请输入新密码' }]\">\r\n              <el-input v-model=\"altPasData.newPassword\" type=\"password\" style=\"width: 80%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认新密码:\" :rules=\"[{ pattern: adminUser.userPassword === adminUser.checkPassword, required: true, message: '两次输入密码不一致'}]\">\r\n              <el-input v-model=\"altPasData.checkNewPas\" type=\"password\" style=\"width: 80%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button @click=\"altPasDiaVis = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"onclickAlterPassword\">确 定</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-dialog>\r\n<!--        <el-dialog-->\r\n<!--          title=\"提示\"-->\r\n<!--          :visible.sync=\"altScopeDiaVis\"-->\r\n<!--          width=\"30%\">-->\r\n<!--          <el-form ref=\"form\" :model=\"altScopeData\" label-width=\"80px\">-->\r\n<!--            <el-form-item label=\"管理范围\" :rules=\"[{ required: true }]\">-->\r\n<!--              <el-radio v-model=\"altScopeData.manScope\" label=\"0\">个人</el-radio>-->\r\n<!--              <el-radio v-model=\"altScopeData.manScope\" label=\"1\">全部</el-radio>-->\r\n<!--            </el-form-item>-->\r\n<!--            <el-form-item>-->\r\n<!--              <el-button @click=\"altScopeDiaVis = false\">取 消</el-button>-->\r\n<!--              <el-button type=\"primary\" @click=\"onclickAlterUser\">确 定</el-button>-->\r\n<!--            </el-form-item>-->\r\n<!--          </el-form>-->\r\n<!--        </el-dialog>-->\r\n        <el-button v-if=\"role === '[admin]'\" type=\"primary\" @click=\"dialogVisible = true\" plain>新增管理员用户</el-button>\r\n        <el-dialog\r\n          title=\"提示\"\r\n          :visible.sync=\"dialogVisible\"\r\n          width=\"30%\">\r\n          <el-form ref=\"form\" :model=\"adminUser\" label-width=\"80px\">\r\n            <el-form-item label=\"姓名\" :rules=\"[{ required: true, message: '请输入姓名' }]\">\r\n              <el-input v-model=\"adminUser.username\" style=\"width: 70%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"账号\" :rules=\"[{ required: true, message: '请输入账号' }]\">\r\n              <el-input v-model=\"adminUser.userAccount\" style=\"width: 70%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" :rules=\"[{ required: true, message: '请输入密码' }]\">\r\n              <el-input v-model=\"adminUser.userPassword\" type=\"password\" style=\"width: 70%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认密码\" :rules=\"[{ pattern: adminUser.userPassword === adminUser.checkPassword, required: true, message: '两次输入密码不一致'}]\">\r\n              <el-input v-model=\"adminUser.checkPassword\" type=\"password\" style=\"width: 70%\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"权限\" :rules=\"[{ required: true }]\">\r\n              <el-radio v-model=\"adminUser.isAdmin\" label=\"0\">普通管理员</el-radio>\r\n              <el-radio v-model=\"adminUser.isAdmin\" label=\"1\">超级管理员</el-radio>\r\n            </el-form-item>\r\n<!--            <el-form-item label=\"管理范围\" :rules=\"[{ required: true }]\">-->\r\n<!--              <el-radio v-model=\"adminUser.manScope\" label=\"0\">个人</el-radio>-->\r\n<!--              <el-radio v-model=\"adminUser.manScope\" label=\"1\">全部</el-radio>-->\r\n<!--            </el-form-item>-->\r\n            <el-form-item>\r\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"onclickAddUser\">确 定</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-dialog>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-table\r\n          v-loading=\"listLoading\"\r\n          :data=\"list\"\r\n          element-loading-text=\"Loading\"\r\n          border\r\n          fit\r\n          highlight-current-row\r\n        >\r\n          <el-table-column align=\"center\" label=\"ID\" width=\"95\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.$index + 1 }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"用户姓名\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.username }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"用户账户\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.userAccount }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"用户类型\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.isSuperadmin == '1'\">超级管理员</span>\r\n              <span v-if=\"scope.row.isSuperadmin == '0'\">普通管理员</span>\r\n            </template>\r\n          </el-table-column>\r\n<!--          <el-table-column label=\"管理权限\" align=\"center\">-->\r\n<!--            <template slot-scope=\"scope\">-->\r\n<!--              <span v-if=\"scope.row.manScope == '1'\">全部</span>-->\r\n<!--              <span v-if=\"scope.row.manScope == '0'\">个人</span>-->\r\n<!--            </template>-->\r\n<!--          </el-table-column>-->\r\n          <el-table-column label=\"用户管理\" align=\"center\" v-if=\"role === '[admin]'\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click.native.prevent=\"openAlterPas(scope.row.id)\" type=\"text\" size=\"small\">修改密码</el-button>\r\n<!--              <el-button @click.native.prevent=\"openAlterUser(scope.row.id)\" type=\"text\" size=\"small\">更改权限</el-button>-->\r\n              <el-button @click.native.prevent=\"onclickDeleteUser(scope.row.id)\" type=\"text\" size=\"small\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUserList, postAddAdminUser, postDeleteAdminUser, postAlterAdminUser, postAlterPassword } from '@/api/usertable'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  filters: {\r\n    statusFilter(status) {\r\n      const statusMap = {\r\n        published: 'success',\r\n        draft: 'gray',\r\n        deleted: 'danger'\r\n      }\r\n      return statusMap[status]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'role'\r\n    ])\r\n  },\r\n  data() {\r\n    return {\r\n      list: null,\r\n      listLoading: true,\r\n      adminUser: {\r\n        username: '',\r\n        userAccount: '',\r\n        userPassword: '',\r\n        checkPassword: '',\r\n        isAdmin: ''\r\n        // manScope: ''\r\n      },\r\n      dialogVisible: false,\r\n      altScopeDiaVis: false,\r\n      altPasDiaVis: false,\r\n      // altScopeData: {\r\n      //   id: 0,\r\n      //   manScope: ''\r\n      // },\r\n      altPasData: {\r\n        id: 0,\r\n        newPassword: '',\r\n        checkNewPas: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      this.listLoading = true\r\n      getUserList().then(response => {\r\n        this.list = response.data\r\n        this.listLoading = false\r\n      })\r\n    },\r\n    onclickAddUser() {\r\n      postAddAdminUser(this.adminUser).then(res => {\r\n        this.dialogVisible = false\r\n        this.$router.go(0)\r\n      })\r\n    },\r\n    onclickDeleteUser(id) {\r\n      postDeleteAdminUser(id).then(res => {\r\n        this.$router.go(0)\r\n        // this.$router.replace({path:this.$router.currentRoute.path,query: this.$router.currentRoute.query })\r\n      })\r\n    },\r\n    onclickAlterUser() {\r\n      postAlterAdminUser(this.altScopeData).then(res => {\r\n        this.$router.go(0)\r\n      })\r\n    },\r\n    onclickAlterPassword(id) {\r\n      postAlterPassword(this.altPasData).then(res => {\r\n        this.$router.go(0)\r\n      })\r\n    },\r\n    openAlterUser(id) {\r\n      this.altScopeData.id = id\r\n      this.altScopeDiaVis = true\r\n    },\r\n    openAlterPas(id) {\r\n      this.altPasData.id = id\r\n      this.altPasDiaVis = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA,SAAAA,WAAA,EAAAC,gBAAA,EAAAC,mBAAA,EAAAC,kBAAA,EAAAC,iBAAA;AACA,SAAAC,UAAA;AAEA;EACAC,OAAA;IACAC,YAAA,WAAAA,aAAAC,MAAA;MACA,IAAAC,SAAA;QACAC,SAAA;QACAC,KAAA;QACAC,OAAA;MACA;MACA,OAAAH,SAAA,CAAAD,MAAA;IACA;EACA;EACAK,QAAA,EAAAC,aAAA,KACAT,UAAA,EACA,OACA,EACA;EACAU,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,WAAA;MACAC,SAAA;QACAC,QAAA;QACAC,WAAA;QACAC,YAAA;QACAC,aAAA;QACAC,OAAA;QACA;MACA;;MACAC,aAAA;MACAC,cAAA;MACAC,YAAA;MACA;MACA;MACA;MACA;MACAC,UAAA;QACAC,EAAA;QACAC,WAAA;QACAC,WAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACAD,SAAA,WAAAA,UAAA;MAAA,IAAAE,KAAA;MACA,KAAAjB,WAAA;MACAjB,WAAA,GAAAmC,IAAA,WAAAC,QAAA;QACAF,KAAA,CAAAlB,IAAA,GAAAoB,QAAA,CAAArB,IAAA;QACAmB,KAAA,CAAAjB,WAAA;MACA;IACA;IACAoB,cAAA,WAAAA,eAAA;MAAA,IAAAC,MAAA;MACArC,gBAAA,MAAAiB,SAAA,EAAAiB,IAAA,WAAAI,GAAA;QACAD,MAAA,CAAAd,aAAA;QACAc,MAAA,CAAAE,OAAA,CAAAC,EAAA;MACA;IACA;IACAC,iBAAA,WAAAA,kBAAAd,EAAA;MAAA,IAAAe,MAAA;MACAzC,mBAAA,CAAA0B,EAAA,EAAAO,IAAA,WAAAI,GAAA;QACAI,MAAA,CAAAH,OAAA,CAAAC,EAAA;QACA;MACA;IACA;IACAG,gBAAA,WAAAA,iBAAA;MAAA,IAAAC,MAAA;MACA1C,kBAAA,MAAA2C,YAAA,EAAAX,IAAA,WAAAI,GAAA;QACAM,MAAA,CAAAL,OAAA,CAAAC,EAAA;MACA;IACA;IACAM,oBAAA,WAAAA,qBAAAnB,EAAA;MAAA,IAAAoB,MAAA;MACA5C,iBAAA,MAAAuB,UAAA,EAAAQ,IAAA,WAAAI,GAAA;QACAS,MAAA,CAAAR,OAAA,CAAAC,EAAA;MACA;IACA;IACAQ,aAAA,WAAAA,cAAArB,EAAA;MACA,KAAAkB,YAAA,CAAAlB,EAAA,GAAAA,EAAA;MACA,KAAAH,cAAA;IACA;IACAyB,YAAA,WAAAA,aAAAtB,EAAA;MACA,KAAAD,UAAA,CAAAC,EAAA,GAAAA,EAAA;MACA,KAAAF,YAAA;IACA;EACA;AACA"}]}